<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MX$ - Versão 1.0</title>
<style>
  :root { font-family: Inter, Segoe UI, Helvetica, Arial, sans-serif; }
  body { background:#f6f7fb; color:#111; margin:0; padding:0; }
  h1 { text-align:center; font-size:2rem; margin:1rem 0; }
  main { max-width:700px; margin:auto; background:#fff; padding:1.5rem; border-radius:16px; box-shadow:0 0 10px #ccc; }
  label { display:block; margin-top:1rem; font-weight:600; text-align:center; }
  input[type="number"], input[type="text"], input[type="email"], input[type="password"] {
    width:100%; padding:0.5rem; font-size:1rem; border:1px solid #ccc; border-radius:8px;
    text-align:center;
  }
  button {
    width:100%; margin-top:1rem; padding:0.75rem;
    font-size:1rem; color:#fff; border:none; border-radius:8px; cursor:pointer;
  }
  #btnCalcular { background:#007bff; }
  #btnConcluir { background:#28a745; }
  #btnResetarHistorico { background:#dc3545; }
  table { width:100%; border-collapse:collapse; margin-top:1rem; }
  th, td { border-bottom:1px solid #ddd; padding:0.5rem; text-align:center; font-size:0.9rem; }
  tr.win { background:#d4f8d4; }
  tr.lose { background:#f9d0d0; }
  #history { margin-top:1rem; max-height:300px; overflow:auto; }
</style>
</head>
<body>

<h1>MX$ - Versão 1.0</h1>

<!-- LOGIN -->
<h2 style="text-align:center;">Login</h2>
<form id="loginForm">
  <input type="email" id="loginEmail" placeholder="Email" required>
  <input type="password" id="loginSenha" placeholder="Senha" required>
  <button type="submit" style="background:#007bff;">Entrar</button>
</form>

<!-- CRIAR CONTA -->
<h2 style="text-align:center;">Criar Conta</h2>
<form id="signupForm">
  <input type="email" id="signupEmail" placeholder="Email" required>
  <input type="password" id="signupSenha" placeholder="Senha" required>
  <button type="submit" style="background:#28a745;">Criar Conta</button>
</form>

<!-- APLICATIVO (só aparece depois do login) -->
<main id="appArea" style="display:none;">

  <div class="row">
    <div>
      <label>Saldo inicial</label>
      <input type="number" id="saldoInicial" step="0.01" />
    </div>
    <div>
      <label>Saldo atual</label>
      <input type="text" id="saldoAtual" readonly />
    </div>
  </div>

  <label>Odd da aposta</label>
  <input type="number" id="oddA" step="0.01" />

  <label>Valor total da aposta</label>
  <input type="number" id="valorTotal" step="0.01" />

  <div id="mults" class="row">
    <div>
      <label>Red</label>
      <input type="number" id="multP1" step="0.01" />
    </div>
    <div>
      <label>Green</label>
      <input type="number" id="multV2" step="0.01" />
    </div>
  </div>

  <div id="lostBox">
    <input type="checkbox" id="chkPerdeu" />
    <label for="chkPerdeu">Aposta perdeu</label>
  </div>

  <button id="btnCalcular">Calcular Retorno</button>
  <button id="btnConcluir">Aposta concluída</button>

  <button id="btnResetarHistorico">Resetar histórico</button>

  <div id="resultado"></div>
  <div id="history"></div>
</main>

<!-- FIREBASE -->
<script type="module">

  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
  import { 
      getAuth, 
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBzFbq5BOp_h4K5Xs9rC3utfaeSC5_i-3c",
    authDomain: "mxdollar-versao1-0.firebaseapp.com",
    projectId: "mxdollar-versao1-0",
    storageBucket: "mxdollar-versao1-0.firebasestorage.app",
    messagingSenderId: "766713134636",
    appId: "1:766713134636:web:dcb2760fd04e2b9aafdb89",
    measurementId: "G-SRM0J3JFFN"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);
  const auth = getAuth(app);

  // Criar Conta
  document.getElementById("signupForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    try {
      await createUserWithEmailAndPassword(auth,
        document.getElementById("signupEmail").value,
        document.getElementById("signupSenha").value
      );
      alert("Conta criada com sucesso!");
    } catch (err) {
      alert(err.message);
    }
  });

  // Login
  document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    try {
      await signInWithEmailAndPassword(auth,
        document.getElementById("loginEmail").value,
        document.getElementById("loginSenha").value
      );
      alert("Login realizado!");
    } catch (err) {
      alert(err.message);
    }
  });

  // Mostrar app apenas após login
  onAuthStateChanged(auth, (user) => {
    if (user) {
      document.getElementById("appArea").style.display = "block";
    }
  });

</script>

</body>
</html>
